---
layout: post
title:  "JavaScript 知识点总结（二）"
date:   2019-03-15
desc: "Frontend Basics"
keywords: "JavaScript,website,blog,easy"
categories: [Frontend]
tags: [JavaScript]
icon: icon-javascript
---
## JavaScript 知识点总结(二)

### **== 和 ===的区别**

对于 == 来说，如果对比双方的类型不一样的话，就会进行类型转换.

假如我们需要对比 x 和 y 是否相同，就会进行如下判断流程：

1. 首先会判断两者类型是否相同。相同的话就是比大小了
2. 类型不相同的话，那么就会进行类型转换
3. 会先判断是否在对比 null 和 undefined，是的话就会返回 true
4. 判断两者类型是否为 string 和 number，是的话就会将字符串转换为 number
5. 判断其中一方是否为 boolean，是的话就会把 boolean 转为 number 再进行判断
6. 判断其中一方是否为 object 且另一方为 string、number 或者 symbol，是的话就会把 object 转为原始类型再进行判断

对于 === 来说就简单多了，就是判断两者类型和值是否相同。

### **闭包**

闭包的定义：函数 A 内部有一个函数 B，函数 B 可以访问到函数 A 中的变量，那么函数 B 就是闭包。
在 JS 中，闭包存在的意义就是让我们可以间接访问函数内部的变量。

```js
ffunction A() {
  let a = 1
  window.B = function () {
      console.log(a)
  }
}
A()
B() // 1
```

例题：循环中使用闭包解决 `var` 定义函数的问题

```js
for (var i = 1; i <= 5; i++) {
  setTimeout(function timer() {
    console.log(i)
  }, i * 1000)
}
```

首先因为 setTimeout 是个异步函数，所以会先把循环全部执行完毕，这时候 i 就是 6 了，所以会输出一堆 6。

解决办法是使用闭包的方式

```js
for (var i = 1; i <= 5; i++) {
  ;(function(j) {
    setTimeout(function timer() {
      console.log(j)
    }, j * 1000)
  })(i)
}
```

在上述代码中，我们首先使用了立即执行函数将 i 传入函数内部，这个时候值就被固定在了参数 j 上面不会改变，当下次执行 timer 这个闭包的时候，就可以使用外部函数的变量 j，从而达到目的。

---
